<p-toast position="top-center"></p-toast>

<div class="comp-content">
  <div class="toolbar-header mb-3">
    <div class="comp-title">
      <h3>Manage Roles and Permissions</h3>
    </div>
    <div class="comp-btns">
      <app-button label="New" styleClass="p-button-sm p-button-rounded" (onclick)="openModal()"></app-button>
    </div>
  </div>

  <div class="middle-content w-o-tabs mt-3">
    <div class="filter-row flex justify-content-between pt-3">

    </div>
    <app-datatable [data]="data" [cols]="columns" [globalFilterFields]="['vehicleTypeName','vehicleAttributeName','attributeInputType','vehicleAttributeValue']" [actions]="actions"></app-datatable>
  </div>

  <p-sidebar [(visible)]="modal" position="right" [style]="{width: '78% '}" >
    <div class="sidebar-main">
      <div class="sidebar-header">
        <div class="sh-title">
          <h3 style="text-align: center;">
          Add Role and Permission
          </h3><br>
        </div>
      </div>

      <div class="sidebar-content">
        <div class="card-grey">
        <form  #userForm="ngForm">
          <div class="row-form grid">
            <div class="col-4">
                <div class="p-field ">
                    <label> <b>Role Name:</b> </label> <br>
                    <input
                    name="username"
                    type="username"
                    pInputText
                    pTooltip="Should contain atleast 4 characters"
                    class="w-full md:w-20rem mb-5"
                    style="padding: 1rem"
                    minlength="4"
                    maxlength="20"
                    pattern="^[A-Za-z0-9_-]+$"
                    required
                  />
                  </div> 

                  <!-- <div *ngIf="username.invalid && (username.dirty || username.touched)" class="p-error">
                    <span *ngIf="username.errors?.['required']">
                      Please Enter Username.</span>   
                    
                      <span *ngIf="username.errors?.['minlength' || 'maxlength']">
                        Username should be between 4-20.</span>  
                        <br>
                        
                      <span *ngIf="username.errors?.['pattern']">
                        Please avoid any space.</span>  
                  </div> -->
            </div>
          </div>
          <br>

          <div class="p-grid">
            <div class="p-col">
                <h4 style="text-align: center;">
                    Permission Name
                    </h4>
                <p-table [value]="modules" [paginator]="false" [rows]="10">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Module</th>
                            <th>Add</th>
                            <th>Delete</th>
                            <th>Update</th>
                            <th>View</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-module>
                        <tr>
                            <td>{{module.name}}</td>
                            <td>
                                <p-checkbox [(ngModel)]="rolePermissions[module.name]['add']"></p-checkbox>
                            </td>
                            <td>
                                <p-checkbox [(ngModel)]="rolePermissions[module.name]['delete']"></p-checkbox>
                            </td>
                            <td>
                                <p-checkbox [(ngModel)]="rolePermissions[module.name]['update']"></p-checkbox>
                            </td>
                            <td>
                                <p-checkbox [(ngModel)]="rolePermissions[module.name]['view']"></p-checkbox>
                            </td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>

        </form>
        </div>

      </div>
      <br>
      <div class="sidebar-footer flex justify-content-end">
        <app-button label="Save" styleClass="p-button-sm p-button-rounded"></app-button>
      </div>
    </div>
  </p-sidebar>  
          
          
        
        
        


      


