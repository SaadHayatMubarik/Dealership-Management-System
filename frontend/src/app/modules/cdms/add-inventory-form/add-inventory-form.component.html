<p-toast></p-toast>
<div class="comp-content">
  <div class="toolbar-header mb-3">
    <div class="comp-title">
      <h3>Inventory</h3>
    </div>
    <div class="comp-btns">
      <app-button label="Add" styleClass="p-button-sm p-button-rounded" (onclick)="openModal()"></app-button>
    </div>
  </div>
  <div class="middle-content w-o-tabs mt-3">
    <div class="filter-row flex justify-content-between pt-3">
    </div>
    <app-datatable [data]="data" [cols]="columns" [globalFilterFields]="[]" [actions]="actions"></app-datatable>
  </div>
  <p-sidebar [(visible)]="modal" position="right" [style]="{ width:'80rem'}">
    <form (ngSubmit)="postInventory()" #Inventory="ngForm">
    <div class="sidebar-main">
      <div class="sidebar-header">
        <div class="sh-title">
          <h3 style="text-align: center;">
            Add Inventory
          </h3>
          <h5 style="text-align: center;">Vehicle Details</h5>
          <br>
        </div>
        <div class="sh-toolbar">
        </div>
      </div>
      <div class="sidebar-content">
        <div class="card-grey padding">
          <div class="row-form grid" >
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <p-dropdown class="p-inputtext-lg" 
                  placeholder="Select a Vehicle Type" 
                  [options]="vehicleTypes" 
                  optionLabel="type_name"
                   (onChange)="onVehicleTypeChange($event)"
                   name="vehicleType"
                   [(ngModel)]="vehicleInventory.vehicleType"
                   ></p-dropdown>
                  <label for="float-label">Vehicle Type</label>
              </span>
              </div>
            </div>
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <input 
                  class="p-inputtext-lg"
                   pInputText 
                   name="make"
                   [(ngModel)]="vehicleInventory.vehicleMake"
                   />
                  <label htmlFor="username">Make</label>
              </span>
              </div>
            </div>
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <input class="p-inputtext-lg" 
                  pInputText
                  name="model"
                  [(ngModel)]="vehicleInventory.vehicleModel"
                  />
                  <label htmlFor="username">Model</label>
              </span>
              </div>
            </div>
          </div>
          <br>
          <div class="row-form grid">
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <input class="p-inputtext-lg"
                   pInputText
                   name="variant"
                   [(ngModel)]="vehicleInventory.vehicleVariant"
                   />
                  <label htmlFor="username">Variant</label>
              </span>
              </div>
            </div>
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <input class="p-inputtext-lg" 
                  pInputText
                  name="Chasis No"
                  [(ngModel)]="vehicleInventory.vehicleChasisNo"
                  />
                  <label htmlFor="username">Chasis No</label>
                </span>
              </div>
            </div>
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <input class="p-inputtext-lg" 
                  pInputText
                  name="engineNo"
                  [(ngModel)]="vehicleInventory.engineNo"
                  />
                  <label for="float-label">Engine No</label>
              </span>
              </div>
            </div>
          </div>
          <br>
          <div class="row-form grid">
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <p-inputNumber class="p-inputtext-lg" 
                   mode="currency" 
                   currency="PKR" 
                   locale="en-US"
                   name="costPrice"
                   [(ngModel)]="vehicleInventory.costPrice"
                   > </p-inputNumber>
                  <label for="float-label">Cost Price</label>
              </span>
              </div>
            </div>
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <p-inputNumber class="p-inputtext-lg"  
                  mode="currency"
                   currency="PKR" 
                   locale="en-US"
                   name="demand"
                   [(ngModel)]="vehicleInventory.demand"
                   > </p-inputNumber>
                  <label for="float-label">Demand</label>
              </span>
              </div>
            </div>
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <p-calendar [readonlyInput]="true" 
                  class="p-inputtext-lg"
                  name="date of purchase"
                  [(ngModel)]="vehicleInventory.dateOfPurchase"
                  ></p-calendar>
                  <label>Date Of Purcahse</label>
              </span>
              </div>
            </div>
          </div>
          <br>
          <div class="row-form grid">
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <input class="p-inputtext-lg" 
                  pInputText
                  name="color"
                  [(ngModel)]="vehicleInventory.bodyColor"
                  />
                  <label htmlFor="username">Body Color</label>
              </span>
              </div>
            </div>
            <div class="col-4">
              <span class="p-float-label">
                <p-dropdown
                 [options]="status" 
                 class="p-inputtext-lg" 
                 placeholder="Select a Vehicle Type"
                 name="status"
                  [(ngModel)]="vehicleInventory.status"
                 ></p-dropdown>
                <label for="float-label">Status</label>
            </span>
            </div>
            <div class="col-4">
              <span class="p-float-label">
                <input class="p-inputtext-lg" 
                pInputText  
                name="RegNo"
                [(ngModel)]="vehicleInventory.regNo"
                />
                <label for="float-label">Registration Number</label>
            </span>
            </div>
          </div>
           <br>
           <div class="row-form grid">
            <div class="col-8">
              <span class="p-float-label">
                <textarea id="float-input" 
                rows="5" cols="80" 
                pInputTextarea
                name="comments"
                [(ngModel)]="vehicleInventory.comments"
                ></textarea>
                <label for="float-label">Other Details</label>
            </span>
            </div>
            <div class="col-3">
              <div class="p-field">
                <label>Grade:</label>
              <input type="number" 
              pInputText 
              [(ngModel)]="sliderValue"
               class="w-full" 
               (input)="onInputChange($event)" 
               (keydown)="onKeyDown($event)"
                [min]="0" 
                [max]="5"
                name="grade"
                [(ngModel)]="vehicleInventory.grade"
                />
                <p-slider [(ngModel)]="sliderValue" [min]="0" [max]="5" [step]="0.5" class="w-full"></p-slider>
              </div>
            </div> 
          </div>

          <div class="row-form grid">
            <div class="col-4">
              <div class="p-field">
                <span class="p-float-label">
                  <input 
                  class="p-inputtext-lg"
                   pInputText 
                   name="modelYear"
                   [(ngModel)]="vehicleInventory.modelYear"
                   />
                  <label htmlFor="Model Year">Model Year</label>
              </span>
              </div>
            </div>
          </div>



       <!-- adding dynamic form here-->
            <div *ngIf="">
              <div class="row-form grid">
                <div class="col-4" *ngFor="let attribute of vehicleInventory.stockAttributeValue; let i = index">
                  <div *ngIf="attribute.vehicleTypeAttribute.attributeInputType === 'text'">
                    <div class="p-field">
                      <span class="p-float-label">
                        <input class="p-inputtext-lg"
                         pInputText
                         [(ngModel)]="attribute.value" 
                         />
                        <label for="float-label">{{ attribute.vehicleTypeAttribute.vehicleAttributeName }}</label>
                      </span>
                    </div>
                  </div>
                  <div *ngIf="attribute.vehicleTypeAttribute.attributeInputType === 'number'">
                    <div class="p-field">
                      <span class="p-float-label">
                        <input class="p-inputtext-lg" 
                        pInputText 
                        [(ngModel)]="attribute.value"  
                        />
                        <label for="float-label">{{attribute.vehicleTypeAttribute.vehicleAttributeName }}</label>
                      </span>
                    </div>
                  </div>
                  <div *ngIf="attribute.vehicleTypeAttribute.attributeInputType === 'dropdown'">
                    <span class="p-float-label">                
                      <p-dropdown class="p-inputtext-lg" 
                      placeholder="Select {{ attribute.vehicleTypeAttribute.vehicleAttributeName}}" 
                      [options]="getOptions(attribute)" 
                      [(ngModel)]="attribute.value" 
              
                      ></p-dropdown>
                      <label for="float-label">{{ attribute.vehicleTypeAttribute.vehicleAttributeName}}</label>
                    </span>
                  </div>
                </div>
              </div>
            </div>
        </div>
        
        
        <!-- <div class="container">
          <h2>Upload Photos</h2>
            <span>Choose Images To Upload:</span>
            <div class="flex justify-content-space-between">
            <p-fileUpload mode="basic" chooseLabel="Choose" name="demo[]" url="https://www.primefaces.org/cdn/api/upload.php" accept="image/*"></p-fileUpload>
            
            <p-fileUpload mode="basic" chooseLabel="Upload" name="demo[]" url="https://www.primefaces.org/cdn/api/upload.php" accept="image/*"></p-fileUpload>
          </div>
            <div class="image-preview-1">

            </div>            
        </div> -->
       
        <br>
    </div>
      <div class="sidebar-footer flex justify-content-end">
        <app-button
        type="submit"
         label="Save" 
         styleClass="p-button-sm p-button-rounded" 
         ></app-button>
      </div>
    </div>
  </form>
  </p-sidebar>
</div>








